Homework 3: p8105\_hw3\_ab4797.git
================
Ani Bilazarian
10/11/2019

\_ Import Instacart Data

``` r
instacart_data = 
  library(p8105.datasets)
data("instacart") 
```

\_ Clean & Import Data

  - Change Product Name to a factor variable
  - Renaming variables

<!-- end list -->

``` r
instacart = 
  instacart %>% 
  janitor::clean_names() %>% 
  rename("order_cart" = add_to_cart_order, "day" = order_dow, "hour" = order_hour_of_day, "name" = product_name) %>% 
  mutate(name = as.factor(name))
```

\_ Explore Data

  - The instacart dataset comes from an online grocery service with over
    3 million online grocery orders from more than 200,000 Instacart
    users. This dataset allows us to observe trends in online grocery
    purchasing. The main variables are name (indicating the type of
    product), aisle (indicating which aisle the product came from) and
    the hour and day of the week that these items were ordered. Here are
    a variety of ways we can explore the data. With summmarize, we can
    observe the different types of products and how many people order.

<!-- end list -->

``` r
instacart %>% 
  group_by(name) %>% 
  summarize(n= n())
```

    ## # A tibble: 39,123 x 2
    ##    name                                                                   n
    ##    <fct>                                                              <int>
    ##  1 "\\\"Constant Comment\\\" Black Tea"                                   3
    ##  2 "\\\"Constant Comment\\\" Decaffeinated Black Tea Blend"               3
    ##  3 "\\\"Darn Good\\\" Chili Mix"                                          5
    ##  4 "\\\"Im Pei-nut Butter\\\" Double Chocolate Cookie & Peanut Butte…     5
    ##  5 "\\\"Mies Vanilla Rohe\\\" Ice Cream Bars"                             6
    ##  6 "\\\"Mokaccino\\\" Milk + Blue Bottle Coffee Chocolate"               10
    ##  7 & Go! Hazelnut Spread + Pretzel Sticks                                10
    ##  8 #2 Coffee Filters                                                     22
    ##  9 #2 Cone White Coffee Filters                                           1
    ## 10 #2 Mechanical Pencils                                                  1
    ## # … with 39,113 more rows

\_ Exploratory plot

  - I started doing exploratory plots and saw quite quickly that the
    distribution of products ordered is extremely right skewed. There
    are by far fewer products that people order time and time again (\>
    5000) then items that are bought infrequently I wanted to identify
    which products are ordered by far the most. These are Bananas,
    Strawberries, Spinach, and other fruits and vegetables.

<!-- end list -->

``` r
instacart %>% 
  count(name) %>% 
  filter(n > 5000) %>% 
  mutate(name = fct_reorder(name, n, .desc = TRUE)) %>% 
  ggplot (aes(x = name, y = n)) + coord_flip() + 
      geom_bar(stat = "identity") + labs(title = "Plot of Items Ordered for each Aisle", x = "Aisle ", y = "number of orders")
```

![](p8105_hw3_ab4797_files/figure-gfm/unnamed-chunk-4-1.png)<!-- -->

\_ Understanding average day and average hour of purchases

  - Here we are looking at the product name and the average day and hour
    people are ordering products. For example, of 461 orders of 1%
    Lowfat Milk, the average day to buy was 2.7 and 13th hour. So people
    are buying milk at the middle of their days\! That is approximately
    the same day and hour that pepole are buying 100 calorie per bag
    popcorn, interesting\!

<!-- end list -->

``` r
instacart %>% 
   group_by(name) %>% 
  summarize(n = n(),
            mean_hour = mean(hour, na.rm = TRUE), 
            mean_day = mean(day, na.rm = TRUE)
            ) %>% 
    mutate(product_ranking = min_rank(n))
```

    ## # A tibble: 39,123 x 5
    ##    name                                n mean_hour mean_day product_ranking
    ##    <fct>                           <int>     <dbl>    <dbl>           <int>
    ##  1 "\\\"Constant Comment\\\" Blac…     3      11.7     3.33           12795
    ##  2 "\\\"Constant Comment\\\" Deca…     3      12.7     3.33           12795
    ##  3 "\\\"Darn Good\\\" Chili Mix"       5      13.6     4.2            18527
    ##  4 "\\\"Im Pei-nut Butter\\\" Dou…     5      12.6     4.2            18527
    ##  5 "\\\"Mies Vanilla Rohe\\\" Ice…     6      11.3     3.17           20342
    ##  6 "\\\"Mokaccino\\\" Milk + Blue…    10      13.2     3.1            24997
    ##  7 & Go! Hazelnut Spread + Pretze…    10      12.8     2.1            24997
    ##  8 #2 Coffee Filters                  22      14.0     3              30571
    ##  9 #2 Cone White Coffee Filters        1      10       3                  1
    ## 10 #2 Mechanical Pencils               1      16       2                  1
    ## # … with 39,113 more rows

\_ Counting Aisles

  - Here we can see that there are 134 aisles.

<!-- end list -->

``` r
instacart %>% 
count(aisle_id, aisle)
```

    ## # A tibble: 134 x 3
    ##    aisle_id aisle                          n
    ##       <int> <chr>                      <int>
    ##  1        1 prepared soups salads       2936
    ##  2        2 specialty cheeses           3873
    ##  3        3 energy granola bars        17449
    ##  4        4 instant foods               9917
    ##  5        5 marinades meat preparation  2905
    ##  6        6 other                       1795
    ##  7        7 packaged meat               1526
    ##  8        8 bakery desserts             1501
    ##  9        9 pasta sauce                 9736
    ## 10       10 kitchen supplies             448
    ## # … with 124 more rows

\_ Which aisles are the most items ordered from?

  - Here we can see the top 5 aisles that items are ordered from. The
    aisles with the top purchases are “water seltzer sparkling water”
    and “yogurt”. In fact, there are more purchases from the yogurt
    aisle then the last three combined\! What does this mean for lactose
    intolerance.

<!-- end list -->

``` r
instacart %>% 
  count(aisle) %>%
  filter(min_rank(desc(aisle)) < 6 )
```

    ## # A tibble: 5 x 2
    ##   aisle                             n
    ##   <chr>                         <int>
    ## 1 trash bags liners              1621
    ## 2 vitamins supplements           1969
    ## 3 water seltzer sparkling water 36617
    ## 4 white wines                    1088
    ## 5 yogurt                        55240
